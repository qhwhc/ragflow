# 环境搭建

## 系统要求

### 硬件要求
- CPU: >= 4核
- 内存: >= 16GB
- 磁盘空间: >= 50GB

### 软件要求
- 操作系统: Linux/Windows/macOS
- Docker: >= 24.0.0
- Docker Compose: >= v2.26.1
- Python: >= 3.8
- Git

## 开发环境配置

### 1. 系统参数配置

#### Linux 系统
1. 配置 vm.max_map_count
   - 检查当前值：`sysctl vm.max_map_count`
   - 设置新值：`sudo sysctl -w vm.max_map_count=262144`
   - 永久配置：在 `/etc/sysctl.conf` 中添加 `vm.max_map_count=262144`

#### 测试方法
- 运行 `sysctl vm.max_map_count` 确认值已正确设置
- 重启系统后再次检查，确保配置持久化

### 2. Docker 环境配置

1. 安装 Docker
   - 按照官方文档安装 Docker Engine
   - 安装 Docker Compose

2. 配置 Docker 镜像加速
   - 配置国内镜像源
   - 设置 Docker 资源限制

#### 测试方法
- 运行 `docker --version` 检查版本
- 运行 `docker compose version` 检查版本
- 运行 `docker run hello-world` 测试 Docker 环境

### 3. Python 环境配置

1. 创建虚拟环境
   - 使用 venv 创建虚拟环境
   - 激活虚拟环境

2. 安装基础依赖
   - 安装 pip 工具
   - 配置 pip 镜像源

#### 测试方法
- 运行 `python --version` 检查版本
- 运行 `pip list` 检查已安装包
- 尝试安装一个测试包验证环境

### 4. 项目环境配置

1. 克隆代码库
   - 创建项目目录
   - 克隆代码

2. 配置开发环境
   - 创建配置文件
   - 设置环境变量

#### 测试方法
- 运行 `git status` 检查代码库状态
- 检查配置文件是否正确加载
- 验证环境变量是否正确设置

## 基础服务部署

### 1. 数据库服务

1. 配置 MySQL
   - 设置数据库参数
   - 创建必要的数据表

2. 配置 MinIO
   - 设置存储参数
   - 创建存储桶

#### 测试方法
- 使用 MySQL 客户端连接测试
- 使用 MinIO 客户端测试存储功能
- 检查服务日志确认运行状态

### 2. 缓存服务

1. 配置 Redis
   - 设置缓存参数
   - 配置持久化

#### 测试方法
- 使用 Redis 客户端测试连接
- 测试基本的缓存操作
- 检查服务状态

### 3. 向量数据库

1. 配置 Milvus
   - 设置向量数据库参数
   - 创建集合

#### 测试方法
- 使用 Milvus 客户端测试连接
- 测试向量存储和检索
- 检查服务状态

## 环境验证

### 1. 服务健康检查

1. 检查所有服务状态
   - 数据库服务
   - 缓存服务
   - 向量数据库
   - 其他微服务

#### 测试方法
- 使用健康检查接口
- 检查服务日志
- 验证服务间通信

### 2. 性能基准测试

1. 运行基础性能测试
   - 数据库性能
   - 缓存性能
   - 向量检索性能

#### 测试方法
- 使用性能测试工具
- 记录基准数据
- 验证性能指标

## 故障排除

### 常见问题

1. 服务启动失败
   - 检查日志
   - 验证配置
   - 检查资源使用

2. 性能问题
   - 检查系统资源
   - 优化配置参数
   - 调整服务参数

### 测试方法
- 使用监控工具
- 检查系统日志
- 验证服务状态

## 下一步

完成环境搭建后，请确保：
1. 所有服务正常运行
2. 性能指标符合要求
3. 环境配置已保存
4. 测试用例全部通过

然后可以开始 [DeepDoc 核心模块](./02_deepdoc_core.md) 的开发。 